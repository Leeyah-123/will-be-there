generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Event {
  id                  String          @id @default(cuid())
  userId              String          @map("user_id")
  name                String
  description         String
  date                DateTime
  type                String
  items               String[]
  visibility          EventVisibility
  location            String
  locationReleaseDate DateTime?
  image               String?
  guestCount          Int             @default(0)
  cancelled           Boolean         @default(false)
  maxGuestPerAttendee Int?            @map("max_guest_per_attendee")

  createdAt DateTime @default(now()) @map("created_at")
  Rsvp      Rsvp[]

  @@map("events")
}

model Rsvp {
  id                    String   @id @default(cuid())
  userId                String?  @map("user_id")
  name                  String?
  email                 String
  eventId               String   @map("event_id")
  congratulatoryMessage String?  @map("congratulatory_message") @db.Text
  items                 String[]
  uploads               String[]
  guests                String[]
  attending             Boolean

  event Event @relation(fields: [eventId], references: [id])
}

enum EventVisibility {
  PUBLIC  @map("Public")
  PRIVATE @map("Private")
}
